<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<!-- 拒绝百度手机转码 -->
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="author" content="wwl">
		<title>模板</title>
	</head>

	<body>

		<div id="aa">
			写点什么
		</div>
		<div id="bb">
			bb
		</div>
		<script>
			//			if(window.DeviceOrientationEvent) {
			//				window.addEventListener('deviceorientation', DeviceOrientationHandler, false);
			//			} else {
			//				alert("您的浏览器不支持DeviceOrientation");
			//			}
			//			var adiv = document.getElementById("aa");
			//
			//			function DeviceOrientationHandler(event) {
			//				var alpha = event.alpha,
			//					beta = event.beta,
			//					gamma = event.gamma;
			//
			//				if(alpha != null || beta != null || gamma != null) {
			//					adiv.innerHTML = "alpha:" + alpha + "<br />beta:" + beta + "<br />gamma:" + gamma;
			//
			//				} else {
			//					document.getElementById("aa").innerHTML = "当前浏览器不支持DeviceOrientation";
			//					//aa.innerHTML = "当前浏览器不支持DeviceOrientation"
			//				}
			//			}

			var color = new Array('#fff', '#ff0', '#f00', '#000', '#00f', '#0ff');

			if(window.DeviceMotionEvent) {
				window.addEventListener('devicemotion', deviceMotionHandler, false);
			} else {
				document.getElementById("bb").innerText = '不支持该方法'
			}
			var defaultspeed = 30; //speed
			var x = y = z = lastX = lastY = lastZ = 0;
			var last_update = 0;

			function deviceMotionHandler(eventData) {

				var acceleration = eventData.accelerationIncludingGravity;

				var curTime = new Date().getTime();

				if((curTime - last_update) > 60) {
					var diffTime = curTime - last_update;
					last_update = curTime;
					x = acceleration.x;
					y = acceleration.y;
					z = acceleration.z;
					var speed = Math.abs(x + y + z - lastX - lastY - lastZ) / diffTime * 10000;

					if(speed > defaultspeed) {

						document.body.style.backgroundColor = color[Math.round(Math.random() * 10) % 6];
						setTimeout(function() {
							document.getElementById("aa").innerText = "x:" + x + "<br />y:" + y + "<br />z:" + z;
						}, 2000);

					}
					lastX = x;
					lastY = y;
					lastZ = z;
				}

			}
		</script>
	</body>

</html>